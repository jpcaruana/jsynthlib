// written by Kenneth L. Martinez
// $Id$
package synthdrivers.NordLead;

import core.Driver;
import core.ErrorMsg;
import core.NameValue;
import core.Patch;
import core.SysexHandler;

public class NLDrumSingleDriver extends Driver {
  static final String BANK_LIST[] = new String[] { "ROM", "PCMCIA 1",
    "PCMCIA 2", "PCMCIA 3" };
  static final String PATCH_LIST[] = new String[] {
    "P0", "P1", "P2", "P3", "P4", "P5", "P6", "P7", "P8", "P9"
  };
  static final int BANK_NUM_OFFSET = 4;
  static final int PATCH_NUM_OFFSET = 5;
  static final byte NEW_PATCH[] = {
    (byte)0xF0, (byte)0x33, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0x10, (byte)0x0A, (byte)0x03,
    (byte)0x00, (byte)0x00, (byte)0x0F, (byte)0x07, (byte)0x0C, (byte)0x01, (byte)0x02, (byte)0x01,
    (byte)0x05, (byte)0x06, (byte)0x0F, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x06, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x0C, (byte)0x02, (byte)0x00, (byte)0x01,
    (byte)0x08, (byte)0x04, (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x02, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x02, (byte)0x0F, (byte)0x01, (byte)0x0B, (byte)0x02, (byte)0x08, (byte)0x05,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x07, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x01, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x04, (byte)0x00, (byte)0x08, (byte)0x07, (byte)0x0F, (byte)0x07, (byte)0x0B, (byte)0x03,
    (byte)0x0F, (byte)0x07, (byte)0x0C, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x06,
    (byte)0x08, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x08, (byte)0x07,
    (byte)0x0A, (byte)0x05, (byte)0x0A, (byte)0x00, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00,
    (byte)0x06, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x0C, (byte)0x01, (byte)0x00, (byte)0x06,
    (byte)0x00, (byte)0x00, (byte)0x0F, (byte)0x07, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x0F,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x07, (byte)0x06,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x01, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0x08, (byte)0x07,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x07, (byte)0x04, (byte)0x02,
    (byte)0x00, (byte)0x00, (byte)0x0F, (byte)0x01, (byte)0x01, (byte)0x06, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x00, (byte)0x0E, (byte)0x07, (byte)0x0E, (byte)0x00,
    (byte)0x08, (byte)0x02, (byte)0x06, (byte)0x00, (byte)0x0E, (byte)0x04, (byte)0x00, (byte)0x00,
    (byte)0x0D, (byte)0x01, (byte)0x0F, (byte)0x01, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x09, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x00,
    (byte)0x04, (byte)0x00, (byte)0x0A, (byte)0x05, (byte)0x0F, (byte)0x07, (byte)0x05, (byte)0x01,
    (byte)0x05, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x04,
    (byte)0x06, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x0A, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x0C, (byte)0x04, (byte)0x00, (byte)0x00, (byte)0x0C, (byte)0x03, (byte)0x00, (byte)0x00,
    (byte)0x0C, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x02, (byte)0x00, (byte)0x00,
    (byte)0x0B, (byte)0x03, (byte)0x0C, (byte)0x06, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x0C, (byte)0x02,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x0C, (byte)0x02,
    (byte)0x0F, (byte)0x07, (byte)0x04, (byte)0x04, (byte)0x0E, (byte)0x02, (byte)0x00, (byte)0x00,
    (byte)0x04, (byte)0x02, (byte)0x01, (byte)0x04, (byte)0x06, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x02, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x02, (byte)0x04, (byte)0x02,
    (byte)0x08, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x04, (byte)0x00, (byte)0x00,
    (byte)0x0F, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x05, (byte)0x04, (byte)0x04,
    (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x09, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x01,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x0A, (byte)0x0E, (byte)0x01, (byte)0x0F, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x01, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x03, (byte)0x00,
    (byte)0x04, (byte)0x00, (byte)0x06, (byte)0x03, (byte)0x0F, (byte)0x07, (byte)0x04, (byte)0x04,
    (byte)0x0E, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x02, (byte)0x01, (byte)0x04,
    (byte)0x06, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x01, (byte)0x00, (byte)0x00,
    (byte)0x06, (byte)0x02, (byte)0x04, (byte)0x02, (byte)0x08, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x0E, (byte)0x04, (byte)0x00, (byte)0x00, (byte)0x0F, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x02, (byte)0x05, (byte)0x04, (byte)0x04, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x09, (byte)0x02,
    (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x0A, (byte)0x0E, (byte)0x01, (byte)0x0F,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x05,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x01, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0x0C, (byte)0x03,
    (byte)0x0F, (byte)0x07, (byte)0x04, (byte)0x04, (byte)0x0E, (byte)0x02, (byte)0x05, (byte)0x01,
    (byte)0x04, (byte)0x02, (byte)0x01, (byte)0x04, (byte)0x06, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x02, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x02, (byte)0x04, (byte)0x02,
    (byte)0x08, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x04, (byte)0x00, (byte)0x00,
    (byte)0x0F, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x05, (byte)0x04, (byte)0x04,
    (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x05, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x0E, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x09, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x06, (byte)0x01,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x0A, (byte)0x0E, (byte)0x01, (byte)0x0F, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x05, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x00,
    (byte)0x04, (byte)0x00, (byte)0x01, (byte)0x04, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x05, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x04,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x02, (byte)0x00, (byte)0x00,
    (byte)0x02, (byte)0x04, (byte)0x00, (byte)0x00, (byte)0x0A, (byte)0x03, (byte)0x00, (byte)0x00,
    (byte)0x0E, (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x0F, (byte)0x01, (byte)0x00, (byte)0x00,
    (byte)0x02, (byte)0x03, (byte)0x00, (byte)0x07, (byte)0x0F, (byte)0x07, (byte)0x00, (byte)0x00,
    (byte)0x07, (byte)0x07, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x07, (byte)0x03,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x01, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x02, (byte)0x00,
    (byte)0x03, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x00, (byte)0x00, (byte)0x00,
    (byte)0x00, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0x04, (byte)0x00, (byte)0xF7
  };
 
  public NLDrumSingleDriver() {
    super ("Drum Single","Kenneth L. Martinez");
    sysexID = "F033**04**";
    sysexRequestDump = new SysexHandler("F0 33 @@ 04 *bankNum* *patchNum* F7");

    patchSize = 1063;
    patchNameStart = -1;
    patchNameSize = 0;
    deviceIDoffset = 2;
    bankNumbers = BANK_LIST;
    patchNumbers = PATCH_LIST;
  }

  public void calculateChecksum(Patch p) {
    // doesn't use checksum
  }

  protected void calculateChecksum(Patch p, int start, int end, int ofs) {
    // doesn't use checksum
  }

  public String getPatchName(Patch p) {
    Patch ip = (Patch)p;
    if (ip.sysex[PATCH_NUM_OFFSET] < 99) {
      return "drum Edit" + (ip.sysex[PATCH_NUM_OFFSET] - 16);
    } else {
      return "drum P" + (ip.sysex[PATCH_NUM_OFFSET] - 99);
    }
  }

  public void setPatchName(Patch p, String name) {}

  public void sendPatch(Patch p) {
    sendPatch((Patch)p, 0, 16); // using edit buffer for slot A
  }

  public void sendPatch(Patch p, int bankNum, int patchNum) {
    Patch p2 = new Patch(p.sysex);
    p2.sysex[BANK_NUM_OFFSET] = (byte)bankNum;
    p2.sysex[PATCH_NUM_OFFSET] = (byte)patchNum;
    mySendPatch(p2);
  }

  // Sends a patch to a set location in the user bank
  public void storePatch(Patch p, int bankNum, int patchNum) {
    setBankNum(bankNum); // must set bank - sysex patch dump always stored in current bank
    setPatchNum(patchNum); // must send program change to make bank change take effect
    sendPatch((Patch)p, bankNum + 1, patchNum + 99);
    setPatchNum(patchNum); // send another program change to get new sound in edit buffer
  }

  protected void playPatch(Patch p) {
    byte sysex[] = new byte[patchSize];
    System.arraycopy(((Patch)p).sysex, 0, sysex, 0, patchSize);
    sysex[BANK_NUM_OFFSET] = 0; // edit buffer
    sysex[PATCH_NUM_OFFSET] = 16; // slot A
    Patch p2 = new Patch(sysex);
    super.playPatch(p2);
  }

  public Patch createNewPatch() {
    return new Patch(NEW_PATCH, this);
  }

  protected void mySendPatch(Patch p) {
    p.sysex[deviceIDoffset] = (byte) (((NordLeadDevice) getDevice()).getGlobalChannel() - 1);
    try {
      send(p.sysex);
    } catch (Exception e) {
      ErrorMsg.reportStatus (e);
    }
  }

  public void requestPatchDump(int bankNum, int patchNum) {
    setBankNum(bankNum); // kludge: drum dump request sends 1063 bytes of garbage -
    setPatchNum(patchNum + 99); // select drum sound, then get data from edit buffer
    send(sysexRequestDump.toSysexMessage(((NordLeadDevice) getDevice()).getGlobalChannel(),
					 new NameValue("bankNum", 10),
					 new NameValue("patchNum", 0)));
  }
}

